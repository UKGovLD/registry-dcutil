    <div class="tab-pane active" id="browse">
      #set($result = $p.wrappedResult)
      
      #if($res)
      
        #set($r = $result.model.getNode($res))
        <h3>Browsing: $r.name</h3>
        #if ($r.listProperties().isEmpty())
          <p>Nothing known locally, try external link: <a href="$res">$res</a></p>
        #else
          <p><strong>URI:</strong> $r.uRI</p>
          #restable($r, "table-striped table-bordered table-condensed")
          #set($in=$r.listInLinks())
          #if(!$in.isEmpty())
          <h3>This resource is:</h3>
          <div class="row">
            <div class="col-md-12">
              <table class="table table-bordered table-striped">
                <tbody>
                  #foreach($pv in $in)
                    #if($pv.getProp().uRI != "http://www.w3.org/1999/02/22-rdf-syntax-ns#first")
                    <tr>
                      <td> #render($pv.getProp()) </td>
                      <td>of</td>
                      <td>
                        #foreach($v in $pv.getValues() )
                          #if( $foreach.count > 500 )
                            ... 
                            #break  
                          #end
                          #resentry($v)#if( $foreach.hasNext )| #end
                        #end
                        <br />
                      </td>
                    </tr>
                    #end
                  #end
                </tbody>
              </table>
            </div>
          </div>
          #end
          <a class="btn btn-default" href="?tab=browse">Back to top level</a>
        #end
        
      #else   ## top level /resource view test
      
        <h3>Root of the collection #linkfor($result.root)</h3>

          #restable($result.root, "table-striped table-bordered table-condensed")

        <h3>The entries in the collection</h3>
        
        #if($result.root.getPropertyValue("http://purl.org/linked-data/registry-ui#hierarchyChildProperty"))
          #set($narrow=$result.root.getPropertyValue("http://purl.org/linked-data/registry-ui#hierarchyChildProperty"))
          #set($top=$result.root.getPropertyValue("http://purl.org/linked-data/registry-ui#hierarchyRootProperty"))
          
          #foreach($entry in $result.entries)
          
            #if ($entry.getPropertyValue($top))
            <div class="hlist-entry">
              #if(!$entry.connectedNodes($narrow).isEmpty())
                <a href="#" data-state="new" data-target="$uiroot/hlist?concept=$lib.pathEncode($member.uRI)&narrow=$lib.pathEncode($narrow)" class="hlist-button"><span class="glyphicon glyphicon-plus-sign"></span></a>
              #end
              #linkfor($entry)
              #if($entry.getPropertyValue("dct:description")) $entry.getPropertyValue("dct:description")#end
            </div>
            #end
          #end
        
        #else ## flat/hierarchy test

        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Types</th>
            </tr>
          </thead>

          <tbody>
            #foreach($entry in $result.entries)
              #if( $foreach.count > 500 ) <tr><td>...</td></tr> #break #end
              <tr>
                <td>#linkfor($entry)</td>
                <td>#if($entry.getPropertyValue("dct:description")) $entry.getPropertyValue("dct:description")#end</td>
                <td>#foreach($ty in $entry.listPropertyValues("rdf:type"))#linkfor($ty)#if( $foreach.hasNext ), #end#end</td>
              </tr>
            #end
          </tbody>
        </table>
        
        #end ## flat/hierarchy test
        
      #end   ## top level /resource view test
    </div>
